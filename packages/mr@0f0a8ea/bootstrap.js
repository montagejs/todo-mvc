!function(e,t){"function"==typeof define&&define.amd?define("mr",[],t):"object"==typeof module&&module.exports?module.exports=t(require,exports,module):e.Montage=t({},{},{})}(this,function(e,t,r){"use strict";function o(e,t){return t.toUpperCase()}function n(){var e,t,r,n,i,a,d,c;if(!u)for(u={},i=document.getElementsByTagName("script"),e=0;e<i.length;e++)if(n=i[e],n.src&&(r=n.src.match(l))&&(a=r[1]),n.hasAttribute("data-mr-location")&&(a=p(window.location,n.getAttribute("data-mr-location"))),a){if(n.dataset)for(c in n.dataset)n.dataset.hasOwnProperty(c)&&(u[c]=n.dataset[c]);else if(n.attributes)for(t=0;t<n.attributes.length;t++)d=n.attributes[t],r=d.name.match(s),r&&(u[r[1].replace(f,o)]=d.value);n.parentNode.removeChild(n),u.mrLocation=a;break}return u}function i(e,t,r,o){function n(){o&&o(i),i.parentNode&&i.parentNode.removeChild(i)}var i;"undefined"!=typeof document?(i=document.createElement("script"),i.setAttribute("async",""),i.setAttribute("src",e),i.onload=function(){t&&t(i),n()},i.onerror=function(e){r&&r(e,i),n()},document.querySelector("head").appendChild(i)):(r(new Error("document not supported")),n())}function a(){var e=document.querySelector("base"),t=e;return t||(e=document.createElement("base"),e.href=""),function(r,o){r=String(r);var n,i,a=document.querySelector("head"),u=document.createElement("a");if(t||a.appendChild(e),!m.test(r))throw new Error("Can't resolve "+JSON.stringify(o)+" relative to "+JSON.stringify(r));return i=e.href,e.href=r,u.href=o,n=u.href,e.href=i,t||a.removeChild(e),n}}var u,d=eval,c=d("this"),s=/^data-(.*)$/,l=/^(.*)bootstrap.js(?:[\?\.]|$)/i,f=/-([a-z])/g,m=/^[\w\-]+:/,p=a(),h=/interactive|complete/,v=function(e){function t(){u&&d&&e(d,s,l)}function r(){s=a("promise"),d=a("require"),l=a("mini-url"),t()}function o(){document.removeEventListener("DOMContentLoaded",o,!0),u=!0,t()}function a(e){if(!m[e]&&v[e]){var t=m[e]={};m[e]=v[e](a,t)||t}return m[e]}e=e||callbackApplication;var u,d,s,l,f=n(),m={},v={};h.test(document.readyState)?o():document.addEventListener("DOMContentLoaded",o,!0);var b={promise:"node_modules/bluebird/js/browser/bluebird.min.js",require:"require.js","require/browser":"browser.js"};if(!c.preload){var w=p(window.location,f.mrLocation),g=f.promiseLocation||p(w,b.promise);i(g,function(){c.bootstrap("bluebird",function(e,t){return window.Promise}),c.bootstrap("promise",function(e,t){return window.Promise})});for(var y in b)b.hasOwnProperty(y)&&"promise"!==y&&i(p(w,b[y]))}c.bootstrap=function(e,t){v[e]=t,delete b[e];for(e in b)if(b.hasOwnProperty(e))return;delete c.bootstrap,r()},c.bootstrap("mini-url",function(e,t){t.resolve=p})},b={getParams:n,bootstrap:v};t.getPlatform=function(){if("undefined"!=typeof window&&window&&window.document)return b;if("undefined"!=typeof process)return e("./node.js");throw new Error("Platform not supported.")},t.Require=null,t.initMontageRequire=function(){var e=t.getPlatform();return e.bootstrap(function(t,r,o){var n={},a=e.getParams(),u=a.module||"",d=o.resolve(t.getLocation(),a["package"]||".");if(c.preload){var s={},l=function(e){return s[e]=s[e]||r.resolve()};c.bundleLoaded=function(e){return l(e).resolve()};var f=r.resolve();n.preloaded=f.promise;var m=r.resolve();c.preload.forEach(function(e){m=m.then(function(){return r.all(e.map(function(e){return i(e),l(e).promise}))})}),f.resolve(m.then(function(){delete c.preload,delete c.bundleLoaded}))}t.loadPackage({location:a.mrLocation,hash:a.mrHash},n).then(function(e){return e.inject("mini-url",o),e.inject("promise",r),e.inject("require",e),"autoPackage"in a&&e.injectPackageDescription(d,{}),e.loadPackage({location:d,hash:a.applicationHash}).then(function(e){return c.require=c.mr=e,e.async(u)})})})},"undefined"!=typeof window?c.__MONTAGE_REQUIRE_LOADED__?console.warn("MontageRequire already loaded!"):(c.__MONTAGE_REQUIRE_LOADED__=!0,t.initMontageRequire()):t.getPlatform()});