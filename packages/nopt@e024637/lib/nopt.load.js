montageDefine("e024637","lib/nopt",{dependencies:["url","path","stream","abbrev"],factory:function(e,r,n){function a(e,n,a,i){a=a||process.argv,e=e||{},n=n||{},"number"!=typeof i&&(i=2),d(e,n,a,i),a=a.slice(i);var l={},o=[],s=a,f=a.slice(0);return v(a,l,o,e,n),t(l,e,r.typeDefs),l.argv={remain:o,cooked:s,original:f},Object.defineProperty(l.argv,"toString",{value:function(){return this.original.map(JSON.stringify).join(" ")},enumerable:!1}),l}function t(e,n,a){a=a||r.typeDefs;var t={},i=[!1,!0,null,String,Array];Object.keys(e).forEach(function(l){if("argv"!==l){var o=e[l],s=Array.isArray(o),f=n[l];s||(o=[o]),f||(f=i),f===Array&&(f=i.concat(Array)),Array.isArray(f)||(f=[f]),d("val=%j",o),d("types=",f),o=o.map(function(i){if("string"==typeof i&&(d("string %j",i),i=i.trim(),"null"===i&&~f.indexOf(null)||"true"===i&&(~f.indexOf(!0)||~f.indexOf(Boolean))||"false"===i&&(~f.indexOf(!1)||~f.indexOf(Boolean))?(i=JSON.parse(i),d("jsonable %j",i)):~f.indexOf(Number)&&!isNaN(i)?(d("convert to number",i),i=+i):~f.indexOf(Date)&&!isNaN(Date.parse(i))&&(d("convert to date",i),i=new Date(i))),!n.hasOwnProperty(l))return i;i!==!1||!~f.indexOf(null)||~f.indexOf(!1)||~f.indexOf(Boolean)||(i=null);var o={};return o[l]=i,d("prevalidated val",o,i,n[l]),p(o,l,i,n[l],a)?(d("validated val",o,i,n[l]),o[l]):(r.invalidHandler?r.invalidHandler(l,i,n[l],e):r.invalidHandler!==!1&&d("invalid: "+l+"="+i,n[l]),t)}).filter(function(e){return e!==t}),o.length?s?(d(s,e[l],o),e[l]=o):e[l]=o[0]:delete e[l],d("k=%s val=%j",l,o,e[l])}})}function i(e,r,n){e[r]=String(n)}function l(e,r,n){if(n===!0)return!1;if(null===n)return!0;n=String(n);var a="win32"===process.platform?/^~(\/|\\)/:/^~\//;return n.match(a)&&process.env.HOME&&(n=g.resolve(process.env.HOME,n.substr(2))),e[r]=g.resolve(String(n)),!0}function o(e,r,n){return d("validate Number %j %j %j",r,n,isNaN(n)),!isNaN(n)&&void(e[r]=+n)}function s(e,r,n){d("validate Date %j %j %j",r,n,Date.parse(n));var a=Date.parse(n);return!isNaN(a)&&void(e[r]=new Date(n))}function f(e,r,n){n=n instanceof Boolean?n.valueOf():"string"==typeof n?isNaN(n)?"null"!==n&&"false"!==n:!!+n:!!n,e[r]=n}function u(e,r,n){return n=O.parse(String(n)),!!n.host&&void(e[r]=n.href)}function c(e,r,n){return n instanceof h&&void(e[r]=n)}function p(e,r,n,a,t){if(Array.isArray(a)){for(var i=0,l=a.length;i<l;i++)if(a[i]!==Array&&p(e,r,n,a[i],t))return!0;return delete e[r],!1}if(a===Array)return!0;if(a!==a)return d("Poison NaN",r,n,a),delete e[r],!1;if(n===a)return d("Explicitly allowed %j",n),e[r]=n,!0;for(var o=!1,s=Object.keys(t),i=0,l=s.length;i<l;i++){d("test type %j %j %j",r,n,s[i]);var f=t[s[i]];if(f&&(a&&a.name&&f.type&&f.type.name?a.name===f.type.name:a===f.type)){var u={};if(o=!1!==f.validate(u,r,n),n=u[r],o){e[r]=n;break}}}return d("OK? %j (%j %j %j)",o,r,n,s[i]),o||delete e[r],o}function v(e,r,n,a,t){d("parse",e,r,n);for(var i=j(Object.keys(a)),l=j(Object.keys(t)),o=0;o<e.length;o++){var s=e[o];if(d("arg",s),s.match(/^-{2,}$/)){n.push.apply(n,e.slice(o+1)),e[o]="--";break}var f=!1;if("-"===s.charAt(0)&&s.length>1){if(s.indexOf("=")!==-1){f=!0;var u=s.split("=");s=u.shift(),u=u.join("="),e.splice.apply(e,[o,1].concat([s,u]))}var c=y(s,t,l,i);if(d("arg=%j shRes=%j",s,c),c&&(d(s,c),e.splice.apply(e,[o,1].concat(c)),s!==c[0])){o--;continue}s=s.replace(/^-+/,"");for(var p=null;0===s.toLowerCase().indexOf("no-");)p=!p,s=s.substr(3);i[s]&&(s=i[s]);var v=a[s]===Array||Array.isArray(a[s])&&a[s].indexOf(Array)!==-1;!a.hasOwnProperty(s)&&r.hasOwnProperty(s)&&(Array.isArray(r[s])||(r[s]=[r[s]]),v=!0);var O,g=e[o+1],h="boolean"==typeof p||a[s]===Boolean||Array.isArray(a[s])&&a[s].indexOf(Boolean)!==-1||"undefined"==typeof a[s]&&!f||"false"===g&&(null===a[s]||Array.isArray(a[s])&&~a[s].indexOf(null));if(h){O=!p,"true"!==g&&"false"!==g||(O=JSON.parse(g),g=null,p&&(O=!O),o++),Array.isArray(a[s])&&g&&(~a[s].indexOf(g)?(O=g,o++):"null"===g&&~a[s].indexOf(null)?(O=null,o++):g.match(/^-{2,}[^-]/)||isNaN(g)||!~a[s].indexOf(Number)?!g.match(/^-[^-]/)&&~a[s].indexOf(String)&&(O=g,o++):(O=+g,o++)),v?(r[s]=r[s]||[]).push(O):r[s]=O;continue}a[s]===String&&void 0===g&&(g=""),g&&g.match(/^-{2,}$/)&&(g=void 0,o--),O=void 0===g||g,v?(r[s]=r[s]||[]).push(O):r[s]=O,o++}else n.push(s)}}function y(e,r,n,a){if(e=e.replace(/^-+/,""),a[e]===e)return null;if(r[e])return r[e]&&!Array.isArray(r[e])&&(r[e]=r[e].split(/\s+/)),r[e];var t=r.___singles;t||(t=Object.keys(r).filter(function(e){return 1===e.length}).reduce(function(e,r){return e[r]=!0,e},{}),r.___singles=t,d("shorthand singles",t));var i=e.split("").filter(function(e){return t[e]});return i.join("")===e?i.map(function(e){return r[e]}).reduce(function(e,r){return e.concat(r)},[]):a[e]&&!r[e]?null:(n[e]&&(e=n[e]),r[e]&&!Array.isArray(r[e])&&(r[e]=r[e].split(/\s+/)),r[e])}var d=process.env.DEBUG_NOPT||process.env.NOPT_DEBUG?function(){console.error.apply(console,arguments)}:function(){},O=e("url"),g=e("path"),h=e("stream").Stream,j=e("abbrev");n.exports=r=a,r.clean=t,r.typeDefs={String:{type:String,validate:i},Boolean:{type:Boolean,validate:f},url:{type:O,validate:u},Number:{type:Number,validate:o},path:{type:g,validate:l},Stream:{type:h,validate:c},Date:{type:Date,validate:s}}}});