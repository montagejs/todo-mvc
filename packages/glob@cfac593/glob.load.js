montageDefine("cfac593","glob",{dependencies:["fs","fs.realpath","minimatch","inherits","events","path","assert","path-is-absolute","./sync.js","./common.js","inflight","util","once"],factory:function(t,i,r){function e(t,i,r){if("function"==typeof i&&(r=i,i={}),i||(i={}),i.sync){if(r)throw new TypeError("callback provided to sync glob");return m(t,i)}return new a(t,i,r)}function s(t,i){if(null===i||"object"!=typeof i)return t;for(var r=Object.keys(i),e=r.length;e--;)t[r[e]]=i[r[e]];return t}function a(t,i,r){function e(){--n._processing,n._processing<=0&&(o?process.nextTick(function(){n._finish()}):n._finish())}if("function"==typeof i&&(r=i,i=null),i&&i.sync){if(r)throw new TypeError("callback provided to sync glob");return new A(t,i)}if(!(this instanceof a))return new a(t,i,r);v(this,t,i),this._didRealPath=!1;var s=this.minimatch.set.length;this.matches=new Array(s),"function"==typeof r&&(r=k(r),this.on("error",r),this.on("end",function(t){r(null,t)}));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===s)return e();for(var o=!0,h=0;h<s;h++)this._process(this.minimatch.set[h],h,!1,e);o=!1}function n(t,i,r){return function(e,s){e?t._readdirError(i,e,r):t._readdirEntries(i,s,r)}}r.exports=e;var o=t("fs"),h=t("fs.realpath"),c=t("minimatch"),u=(c.Minimatch,t("inherits")),f=t("events").EventEmitter,p=t("path"),l=t("assert"),d=t("path-is-absolute"),m=t("./sync.js"),_=t("./common.js"),v=(_.alphasort,_.alphasorti,_.setopts),y=_.ownProp,b=t("inflight"),g=(t("util"),_.childrenIgnored),E=_.isIgnored,k=t("once");e.sync=m;var A=e.GlobSync=m.GlobSync;e.glob=e,e.hasMagic=function(t,i){var r=s({},i);r.noprocess=!0;var e=new a(t,r),n=e.minimatch.set;if(!t)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},e.Glob=a,u(a,f),a.prototype._finish=function(){if(l(this instanceof a),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();_.finish(this),this.emit("end",this.found)}},a.prototype._realpath=function(){function t(){0===--i&&r._finish()}if(!this._didRealpath){this._didRealpath=!0;var i=this.matches.length;if(0===i)return this._finish();for(var r=this,e=0;e<this.matches.length;e++)this._realpathSet(e,t)}},a.prototype._realpathSet=function(t,i){var r=this.matches[t];if(!r)return i();var e=Object.keys(r),s=this,a=e.length;if(0===a)return i();var n=this.matches[t]=Object.create(null);e.forEach(function(r,e){r=s._makeAbs(r),h.realpath(r,s.realpathCache,function(e,o){e?"stat"===e.syscall?n[r]=!0:s.emit("error",e):n[o]=!0,0===--a&&(s.matches[t]=n,i())})})},a.prototype._mark=function(t){return _.mark(this,t)},a.prototype._makeAbs=function(t){return _.makeAbs(this,t)},a.prototype.abort=function(){this.aborted=!0,this.emit("abort")},a.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},a.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<t.length;i++){var r=t[i];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var e=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<e.length;i++){var s=e[i];this._processing--,this._process(s[0],s[1],s[2],s[3])}}}},a.prototype._process=function(t,i,r,e){if(l(this instanceof a),l("function"==typeof e),!this.aborted){if(this._processing++,this.paused)return void this._processQueue.push([t,i,r,e]);for(var s=0;"string"==typeof t[s];)s++;var n;switch(s){case t.length:return void this._processSimple(t.join("/"),i,e);case 0:n=null;break;default:n=t.slice(0,s).join("/")}var o,h=t.slice(s);null===n?o=".":d(n)||d(t.join("/"))?(n&&d(n)||(n="/"+n),o=n):o=n;var u=this._makeAbs(o);if(g(this,o))return e();var f=h[0]===c.GLOBSTAR;f?this._processGlobStar(n,o,u,h,i,r,e):this._processReaddir(n,o,u,h,i,r,e)}},a.prototype._processReaddir=function(t,i,r,e,s,a,n){var o=this;this._readdir(r,a,function(h,c){return o._processReaddir2(t,i,r,e,s,a,c,n)})},a.prototype._processReaddir2=function(t,i,r,e,s,a,n,o){if(!n)return o();for(var h=e[0],c=!!this.minimatch.negate,u=h._glob,f=this.dot||"."===u.charAt(0),l=[],d=0;d<n.length;d++){var m=n[d];if("."!==m.charAt(0)||f){var _;_=c&&!t?!m.match(h):m.match(h),_&&l.push(m)}}var v=l.length;if(0===v)return o();if(1===e.length&&!this.mark&&!this.stat){this.matches[s]||(this.matches[s]=Object.create(null));for(var d=0;d<v;d++){var m=l[d];t&&(m="/"!==t?t+"/"+m:t+m),"/"!==m.charAt(0)||this.nomount||(m=p.join(this.root,m)),this._emitMatch(s,m)}return o()}e.shift();for(var d=0;d<v;d++){var m=l[d];t&&(m="/"!==t?t+"/"+m:t+m),this._process([m].concat(e),s,a,o)}o()},a.prototype._emitMatch=function(t,i){if(!this.aborted&&!E(this,i)){if(this.paused)return void this._emitQueue.push([t,i]);var r=d(i)?i:this._makeAbs(i);if(this.mark&&(i=this._mark(i)),this.absolute&&(i=r),!this.matches[t][i]){if(this.nodir){var e=this.cache[r];if("DIR"===e||Array.isArray(e))return}this.matches[t][i]=!0;var s=this.statCache[r];s&&this.emit("stat",i,s),this.emit("match",i)}}},a.prototype._readdirInGlobStar=function(t,i){function r(r,e){if(r&&"ENOENT"===r.code)return i();var a=e&&e.isSymbolicLink();s.symlinks[t]=a,a||!e||e.isDirectory()?s._readdir(t,!1,i):(s.cache[t]="FILE",i())}if(!this.aborted){if(this.follow)return this._readdir(t,!1,i);var e="lstat\0"+t,s=this,a=b(e,r);a&&o.lstat(t,a)}},a.prototype._readdir=function(t,i,r){if(!this.aborted&&(r=b("readdir\0"+t+"\0"+i,r))){if(i&&!y(this.symlinks,t))return this._readdirInGlobStar(t,r);if(y(this.cache,t)){var e=this.cache[t];if(!e||"FILE"===e)return r();if(Array.isArray(e))return r(null,e)}o.readdir(t,n(this,t,r))}},a.prototype._readdirEntries=function(t,i,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var e=0;e<i.length;e++){var s=i[e];s="/"===t?t+s:t+"/"+s,this.cache[s]=!0}return this.cache[t]=i,r(null,i)}},a.prototype._readdirError=function(t,i,r){if(!this.aborted){switch(i.code){case"ENOTSUP":case"ENOTDIR":var e=this._makeAbs(t);if(this.cache[e]="FILE",e===this.cwdAbs){var s=new Error(i.code+" invalid cwd "+this.cwd);s.path=this.cwd,s.code=i.code,this.emit("error",s),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",i),this.abort()),this.silent||console.error("glob error",i)}return r()}},a.prototype._processGlobStar=function(t,i,r,e,s,a,n){var o=this;this._readdir(r,a,function(h,c){o._processGlobStar2(t,i,r,e,s,a,c,n)})},a.prototype._processGlobStar2=function(t,i,r,e,s,a,n,o){if(!n)return o();var h=e.slice(1),c=t?[t]:[],u=c.concat(h);this._process(u,s,!1,o);var f=this.symlinks[r],p=n.length;if(f&&a)return o();for(var l=0;l<p;l++){var d=n[l];if("."!==d.charAt(0)||this.dot){var m=c.concat(n[l],h);this._process(m,s,!0,o);var _=c.concat(n[l],e);this._process(_,s,!0,o)}}o()},a.prototype._processSimple=function(t,i,r){var e=this;this._stat(t,function(s,a){e._processSimple2(t,i,s,a,r)})},a.prototype._processSimple2=function(t,i,r,e,s){if(this.matches[i]||(this.matches[i]=Object.create(null)),!e)return s();if(t&&d(t)&&!this.nomount){var a=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=p.join(this.root,t):(t=p.resolve(this.root,t),a&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(i,t),s()},a.prototype._stat=function(t,i){function r(r,s){return s&&s.isSymbolicLink()?o.stat(e,function(r,a){r?c._stat2(t,e,null,s,i):c._stat2(t,e,r,a,i)}):void c._stat2(t,e,r,s,i)}var e=this._makeAbs(t),s="/"===t.slice(-1);if(t.length>this.maxLength)return i();if(!this.stat&&y(this.cache,e)){var a=this.cache[e];if(Array.isArray(a)&&(a="DIR"),!s||"DIR"===a)return i(null,a);if(s&&"FILE"===a)return i()}var n=this.statCache[e];if(void 0!==n){if(n===!1)return i(null,n);var h=n.isDirectory()?"DIR":"FILE";return s&&"FILE"===h?i():i(null,h,n)}var c=this,u=b("stat\0"+e,r);u&&o.lstat(e,u)},a.prototype._stat2=function(t,i,r,e,s){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[i]=!1,s();var a="/"===t.slice(-1);if(this.statCache[i]=e,"/"===i.slice(-1)&&e&&!e.isDirectory())return s(null,!1,e);var n=!0;return e&&(n=e.isDirectory()?"DIR":"FILE"),this.cache[i]=this.cache[i]||n,a&&"FILE"===n?s():s(null,n,e)}}});