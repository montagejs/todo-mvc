montageDefine("cfac593","sync",{dependencies:["fs","fs.realpath","minimatch","./glob.js","util","path","assert","path-is-absolute","./common.js"],factory:function(t,r,i){function s(t,r){if("function"==typeof r||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new e(t,r).found}function e(t,r){if(!t)throw new Error("must provide pattern");if("function"==typeof r||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof e))return new e(t,r);if(p(this,t,r),this.noprocess)return this;var i=this.minimatch.set.length;this.matches=new Array(i);for(var s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1);this._finish()}i.exports=s,s.GlobSync=e;var a=t("fs"),h=t("fs.realpath"),c=t("minimatch"),o=(c.Minimatch,t("./glob.js").Glob,t("util"),t("path")),n=t("assert"),f=t("path-is-absolute"),l=t("./common.js"),p=(l.alphasort,l.alphasorti,l.setopts),u=l.ownProp,m=l.childrenIgnored,d=l.isIgnored;e.prototype._finish=function(){if(n(this instanceof e),this.realpath){var t=this;this.matches.forEach(function(r,i){var s=t.matches[i]=Object.create(null);for(var e in r)try{e=t._makeAbs(e);var a=h.realpathSync(e,t.realpathCache);s[a]=!0}catch(c){if("stat"!==c.syscall)throw c;s[t._makeAbs(e)]=!0}})}l.finish(this)},e.prototype._process=function(t,r,i){n(this instanceof e);for(var s=0;"string"==typeof t[s];)s++;var a;switch(s){case t.length:return void this._processSimple(t.join("/"),r);case 0:a=null;break;default:a=t.slice(0,s).join("/")}var h,o=t.slice(s);null===a?h=".":f(a)||f(t.join("/"))?(a&&f(a)||(a="/"+a),h=a):h=a;var l=this._makeAbs(h);if(!m(this,h)){var p=o[0]===c.GLOBSTAR;p?this._processGlobStar(a,h,l,o,r,i):this._processReaddir(a,h,l,o,r,i)}},e.prototype._processReaddir=function(t,r,i,s,e,a){var h=this._readdir(i,a);if(h){for(var c=s[0],n=!!this.minimatch.negate,f=c._glob,l=this.dot||"."===f.charAt(0),p=[],u=0;u<h.length;u++){var m=h[u];if("."!==m.charAt(0)||l){var d;d=n&&!t?!m.match(c):m.match(c),d&&p.push(m)}}var v=p.length;if(0!==v)if(1!==s.length||this.mark||this.stat){s.shift();for(var u=0;u<v;u++){var y,m=p[u];y=t?[t,m]:[m],this._process(y.concat(s),e,a)}}else{this.matches[e]||(this.matches[e]=Object.create(null));for(var u=0;u<v;u++){var m=p[u];t&&(m="/"!==t.slice(-1)?t+"/"+m:t+m),"/"!==m.charAt(0)||this.nomount||(m=o.join(this.root,m)),this._emitMatch(e,m)}}}},e.prototype._emitMatch=function(t,r){if(!d(this,r)){var i=this._makeAbs(r);if(this.mark&&(r=this._mark(r)),this.absolute&&(r=i),!this.matches[t][r]){if(this.nodir){var s=this.cache[i];if("DIR"===s||Array.isArray(s))return}this.matches[t][r]=!0,this.stat&&this._stat(r)}}},e.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var r,i;try{i=a.lstatSync(t)}catch(s){if("ENOENT"===s.code)return null}var e=i&&i.isSymbolicLink();return this.symlinks[t]=e,e||!i||i.isDirectory()?r=this._readdir(t,!1):this.cache[t]="FILE",r},e.prototype._readdir=function(t,r){if(r&&!u(this.symlinks,t))return this._readdirInGlobStar(t);if(u(this.cache,t)){var i=this.cache[t];if(!i||"FILE"===i)return null;if(Array.isArray(i))return i}try{return this._readdirEntries(t,a.readdirSync(t))}catch(s){return this._readdirError(t,s),null}},e.prototype._readdirEntries=function(t,r){if(!this.mark&&!this.stat)for(var i=0;i<r.length;i++){var s=r[i];s="/"===t?t+s:t+"/"+s,this.cache[s]=!0}return this.cache[t]=r,r},e.prototype._readdirError=function(t,r){switch(r.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(t);if(this.cache[i]="FILE",i===this.cwdAbs){var s=new Error(r.code+" invalid cwd "+this.cwd);throw s.path=this.cwd,s.code=r.code,s}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw r;this.silent||console.error("glob error",r)}},e.prototype._processGlobStar=function(t,r,i,s,e,a){var h=this._readdir(i,a);if(h){var c=s.slice(1),o=t?[t]:[],n=o.concat(c);this._process(n,e,!1);var f=h.length,l=this.symlinks[i];if(!l||!a)for(var p=0;p<f;p++){var u=h[p];if("."!==u.charAt(0)||this.dot){var m=o.concat(h[p],c);this._process(m,e,!0);var d=o.concat(h[p],s);this._process(d,e,!0)}}}},e.prototype._processSimple=function(t,r){var i=this._stat(t);if(this.matches[r]||(this.matches[r]=Object.create(null)),i){if(t&&f(t)&&!this.nomount){var s=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=o.join(this.root,t):(t=o.resolve(this.root,t),s&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(r,t)}},e.prototype._stat=function(t){var r=this._makeAbs(t),i="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,r)){var s=this.cache[r];if(Array.isArray(s)&&(s="DIR"),!i||"DIR"===s)return s;if(i&&"FILE"===s)return!1}var e=this.statCache[r];if(!e){var h;try{h=a.lstatSync(r)}catch(c){if(c&&("ENOENT"===c.code||"ENOTDIR"===c.code))return this.statCache[r]=!1,!1}if(h&&h.isSymbolicLink())try{e=a.statSync(r)}catch(c){e=h}else e=h}this.statCache[r]=e;var s=!0;return e&&(s=e.isDirectory()?"DIR":"FILE"),this.cache[r]=this.cache[r]||s,(!i||"FILE"!==s)&&s},e.prototype._mark=function(t){return l.mark(this,t)},e.prototype._makeAbs=function(t){return l.makeAbs(this,t)}}});