montageDefine("aa0acb4","ui/rich-text-editor/rich-text-editor.reel/rich-text-sanitizer",{dependencies:["montage"],factory:function(e,t,r){var n=e("montage").Montage;t.Sanitizer=n.specialize({willSetValue:{value:function(e,t){return this._scopeCSS(e,t)}},didGetValue:{value:function(e,t){return this._unscopeCSS(e,t)}},willInsertHtmlData:{value:function(e,t){return this._scopeCSS(this._removeScript(e),t)}},_scopeCSS:{enumerable:!0,value:function(e,t){var r=".editor-"+t+" ";return"string"==typeof e&&(e=e.replace(/(<style ?[^>]*>)([^<]*)(<\/style>)/gi,function(e,t,n,i){return n=n.replace(/\t|\n|\r/g,function(e){return"\t"==e?" ":""}),n=n.replace(/\*\.editor-[^ ] +/g,"body"),n=n.replace(/\.editor-[^ ]+ /g,""),n=n.replace(/([^{]+)({[^}]*})/gi,function(e,t,n){return t=t.replace(/ *([^,]+)/g,function(e,t){return"body"==t.toLowerCase()?"*"+r:r+t}),t+n}),t+n+i})),e}},_unscopeCSS:{enumerable:!0,value:function(e,t){return"string"==typeof e&&(e=e.replace(/(<style ?[^>]*>)([^<]*)(<\/style>)/gi,function(e,t,r,n){return r=r.replace(/\*\.editor-[^ ] +/g,"body"),r=r.replace(/\.editor-[^ ]+ /g,""),t+r+n})),e}},_removeScript:{enumerable:!0,value:function(e){var t=document.createElement("div"),r=function(e){var t,n,i,a=e.children,o=a.length,c=e.attributes,u=c.length;for(i=0;i<u;i++)n=c[i],(n.name.match(/^on[a-z]+/i)||n.value.match(/^javascript:/))&&(e.removeAttribute(n.name),i--,u--);for(i=0;i<o;i++)t=a[i],"SCRIPT"==t.tagName?(t.parentNode.removeChild(t),i--,o--):r(t)};return t.innerHTML=e,r(t),t.innerHTML}}})}});