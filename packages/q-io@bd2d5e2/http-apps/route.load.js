montageDefine("bd2d5e2","http-apps/route",{dependencies:["q","./status"],factory:function(n,t,e){var r=n("q"),u=n("./status");t.Cap=function(n,t){return t=t||u.notFound,function(e,r){return""===e.pathInfo||"/"===e.pathInfo?n(e,r):t(e,r)}},t.Tap=function(n,t){return function(e,u){var o=this,i=arguments;return r.when(t.apply(this,arguments),function(t){return t?t:n.apply(o,i)})}},t.Trap=function(n,t){return function(e,u){return r.when(n.apply(this,arguments),function(n){if(n)return n.headers=n.headers||{},t(n,e)||n})}},t.Branch=function(n,t){return n||(n={}),t||(t=u.notFound),function(e,r){if(!/^\//.test(e.pathInfo))return t(e,r);var u=e.pathInfo.slice(1),o=u.split("/"),i=decodeURIComponent(o.shift());return Object.has(n,i)?(e.scriptName=e.scriptName+i+"/",e.pathInfo=u.slice(i.length),Object.get(n,i)(e,r)):t(e,r)}},t.FirstFound=function(n){return function(t,e){function u(){var e=n[o++](t,e);return o<i?r.when(e,function(n){return 404===n.status?u():n}):e}var o=0,i=n.length;return u()}}}});